{"ast":null,"code":"require('../../lib/keyboard.polyfill');\n\nconst MAX_DELTA = 0.2,\n      PROXY_FLAG = '__keyboard-controls-proxy';\nconst KeyboardEvent = window.KeyboardEvent;\n/**\n * Keyboard Controls component.\n *\n * Stripped-down version of: https://github.com/donmccurdy/aframe-keyboard-controls\n *\n * Bind keyboard events to components, or control your entities with the WASD keys.\n *\n * Why use KeyboardEvent.code? \"This is set to a string representing the key that was pressed to\n * generate the KeyboardEvent, without taking the current keyboard layout (e.g., QWERTY vs.\n * Dvorak), locale (e.g., English vs. French), or any modifier keys into account. This is useful\n * when you care about which physical key was pressed, rather thanwhich character it corresponds\n * to. For example, if youâ€™re a writing a game, you might want a certain set of keys to move the\n * player in different directions, and that mapping should ideally be independent of keyboard\n * layout. See: https://developers.google.com/web/updates/2016/04/keyboardevent-keys-codes\n *\n * @namespace wasd-controls\n * keys the entity moves and if you release it will stop. Easing simulates friction.\n * to the entity when pressing the keys.\n * @param {bool} [enabled=true] - To completely enable or disable the controls\n */\n\nmodule.exports = AFRAME.registerComponent('keyboard-controls', {\n  schema: {\n    enabled: {\n      default: true\n    },\n    debug: {\n      default: false\n    }\n  },\n  init: function () {\n    this.dVelocity = new THREE.Vector3();\n    this.localKeys = {};\n    this.listeners = {\n      keydown: this.onKeyDown.bind(this),\n      keyup: this.onKeyUp.bind(this),\n      blur: this.onBlur.bind(this)\n    };\n    this.attachEventListeners();\n  },\n\n  /*******************************************************************\n  * Movement\n  */\n  isVelocityActive: function () {\n    return this.data.enabled && !!Object.keys(this.getKeys()).length;\n  },\n  getVelocityDelta: function () {\n    const data = this.data,\n          keys = this.getKeys();\n    this.dVelocity.set(0, 0, 0);\n\n    if (data.enabled) {\n      if (keys.KeyW || keys.ArrowUp) {\n        this.dVelocity.z -= 1;\n      }\n\n      if (keys.KeyA || keys.ArrowLeft) {\n        this.dVelocity.x -= 1;\n      }\n\n      if (keys.KeyS || keys.ArrowDown) {\n        this.dVelocity.z += 1;\n      }\n\n      if (keys.KeyD || keys.ArrowRight) {\n        this.dVelocity.x += 1;\n      }\n    }\n\n    return this.dVelocity.clone();\n  },\n\n  /*******************************************************************\n  * Events\n  */\n  play: function () {\n    this.attachEventListeners();\n  },\n  pause: function () {\n    this.removeEventListeners();\n  },\n  remove: function () {\n    this.pause();\n  },\n  attachEventListeners: function () {\n    window.addEventListener('keydown', this.listeners.keydown, false);\n    window.addEventListener('keyup', this.listeners.keyup, false);\n    window.addEventListener('blur', this.listeners.blur, false);\n  },\n  removeEventListeners: function () {\n    window.removeEventListener('keydown', this.listeners.keydown);\n    window.removeEventListener('keyup', this.listeners.keyup);\n    window.removeEventListener('blur', this.listeners.blur);\n  },\n  onKeyDown: function (event) {\n    if (AFRAME.utils.shouldCaptureKeyEvent(event)) {\n      this.localKeys[event.code] = true;\n      this.emit(event);\n    }\n  },\n  onKeyUp: function (event) {\n    if (AFRAME.utils.shouldCaptureKeyEvent(event)) {\n      delete this.localKeys[event.code];\n      this.emit(event);\n    }\n  },\n  onBlur: function () {\n    for (let code in this.localKeys) {\n      if (this.localKeys.hasOwnProperty(code)) {\n        delete this.localKeys[code];\n      }\n    }\n  },\n  emit: function (event) {\n    // TODO - keydown only initially?\n    // TODO - where the f is the spacebar\n    // Emit original event.\n    if (PROXY_FLAG in event) {\n      // TODO - Method never triggered.\n      this.el.emit(event.type, event);\n    } // Emit convenience event, identifying key.\n\n\n    this.el.emit(event.type + ':' + event.code, new KeyboardEvent(event.type, event));\n    if (this.data.debug) console.log(event.type + ':' + event.code);\n  },\n\n  /*******************************************************************\n  * Accessors\n  */\n  isPressed: function (code) {\n    return code in this.getKeys();\n  },\n  getKeys: function () {\n    if (this.isProxied()) {\n      return this.el.sceneEl.components['proxy-controls'].getKeyboard();\n    }\n\n    return this.localKeys;\n  },\n  isProxied: function () {\n    const proxyControls = this.el.sceneEl.components['proxy-controls'];\n    return proxyControls && proxyControls.isConnected();\n  }\n});","map":{"version":3,"sources":["E:/Universitat Paderborn/NEW/src/node_modules/aframe-extras/src/controls/keyboard-controls.js"],"names":["require","MAX_DELTA","PROXY_FLAG","KeyboardEvent","window","module","exports","AFRAME","registerComponent","schema","enabled","default","debug","init","dVelocity","THREE","Vector3","localKeys","listeners","keydown","onKeyDown","bind","keyup","onKeyUp","blur","onBlur","attachEventListeners","isVelocityActive","data","Object","keys","getKeys","length","getVelocityDelta","set","KeyW","ArrowUp","z","KeyA","ArrowLeft","x","KeyS","ArrowDown","KeyD","ArrowRight","clone","play","pause","removeEventListeners","remove","addEventListener","removeEventListener","event","utils","shouldCaptureKeyEvent","code","emit","hasOwnProperty","el","type","console","log","isPressed","isProxied","sceneEl","components","getKeyboard","proxyControls","isConnected"],"mappings":"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","sourcesContent":["require('../../lib/keyboard.polyfill');\n\nconst MAX_DELTA = 0.2,\n    PROXY_FLAG = '__keyboard-controls-proxy';\n\nconst KeyboardEvent = window.KeyboardEvent;\n\n/**\n * Keyboard Controls component.\n *\n * Stripped-down version of: https://github.com/donmccurdy/aframe-keyboard-controls\n *\n * Bind keyboard events to components, or control your entities with the WASD keys.\n *\n * Why use KeyboardEvent.code? \"This is set to a string representing the key that was pressed to\n * generate the KeyboardEvent, without taking the current keyboard layout (e.g., QWERTY vs.\n * Dvorak), locale (e.g., English vs. French), or any modifier keys into account. This is useful\n * when you care about which physical key was pressed, rather thanwhich character it corresponds\n * to. For example, if youâ€™re a writing a game, you might want a certain set of keys to move the\n * player in different directions, and that mapping should ideally be independent of keyboard\n * layout. See: https://developers.google.com/web/updates/2016/04/keyboardevent-keys-codes\n *\n * @namespace wasd-controls\n * keys the entity moves and if you release it will stop. Easing simulates friction.\n * to the entity when pressing the keys.\n * @param {bool} [enabled=true] - To completely enable or disable the controls\n */\nmodule.exports = AFRAME.registerComponent('keyboard-controls', {\n  schema: {\n    enabled:           { default: true },\n    debug:             { default: false }\n  },\n\n  init: function () {\n    this.dVelocity = new THREE.Vector3();\n    this.localKeys = {};\n    this.listeners = {\n      keydown: this.onKeyDown.bind(this),\n      keyup: this.onKeyUp.bind(this),\n      blur: this.onBlur.bind(this)\n    };\n    this.attachEventListeners();\n  },\n\n  /*******************************************************************\n  * Movement\n  */\n\n  isVelocityActive: function () {\n    return this.data.enabled && !!Object.keys(this.getKeys()).length;\n  },\n\n  getVelocityDelta: function () {\n    const data = this.data,\n        keys = this.getKeys();\n\n    this.dVelocity.set(0, 0, 0);\n    if (data.enabled) {\n      if (keys.KeyW || keys.ArrowUp)    { this.dVelocity.z -= 1; }\n      if (keys.KeyA || keys.ArrowLeft)  { this.dVelocity.x -= 1; }\n      if (keys.KeyS || keys.ArrowDown)  { this.dVelocity.z += 1; }\n      if (keys.KeyD || keys.ArrowRight) { this.dVelocity.x += 1; }\n    }\n\n    return this.dVelocity.clone();\n  },\n\n  /*******************************************************************\n  * Events\n  */\n\n  play: function () {\n    this.attachEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n  },\n\n  remove: function () {\n    this.pause();\n  },\n\n  attachEventListeners: function () {\n    window.addEventListener('keydown', this.listeners.keydown, false);\n    window.addEventListener('keyup', this.listeners.keyup, false);\n    window.addEventListener('blur', this.listeners.blur, false);\n  },\n\n  removeEventListeners: function () {\n    window.removeEventListener('keydown', this.listeners.keydown);\n    window.removeEventListener('keyup', this.listeners.keyup);\n    window.removeEventListener('blur', this.listeners.blur);\n  },\n\n  onKeyDown: function (event) {\n    if (AFRAME.utils.shouldCaptureKeyEvent(event)) {\n      this.localKeys[event.code] = true;\n      this.emit(event);\n    }\n  },\n\n  onKeyUp: function (event) {\n    if (AFRAME.utils.shouldCaptureKeyEvent(event)) {\n      delete this.localKeys[event.code];\n      this.emit(event);\n    }\n  },\n\n  onBlur: function () {\n    for (let code in this.localKeys) {\n      if (this.localKeys.hasOwnProperty(code)) {\n        delete this.localKeys[code];\n      }\n    }\n  },\n\n  emit: function (event) {\n    // TODO - keydown only initially?\n    // TODO - where the f is the spacebar\n\n    // Emit original event.\n    if (PROXY_FLAG in event) {\n      // TODO - Method never triggered.\n      this.el.emit(event.type, event);\n    }\n\n    // Emit convenience event, identifying key.\n    this.el.emit(event.type + ':' + event.code, new KeyboardEvent(event.type, event));\n    if (this.data.debug) console.log(event.type + ':' + event.code);\n  },\n\n  /*******************************************************************\n  * Accessors\n  */\n\n  isPressed: function (code) {\n    return code in this.getKeys();\n  },\n\n  getKeys: function () {\n    if (this.isProxied()) {\n      return this.el.sceneEl.components['proxy-controls'].getKeyboard();\n    }\n    return this.localKeys;\n  },\n\n  isProxied: function () {\n    const proxyControls = this.el.sceneEl.components['proxy-controls'];\n    return proxyControls && proxyControls.isConnected();\n  }\n\n});\n"]},"metadata":{},"sourceType":"script"}